{% extends "base.html" %}

{% block title %}Dashboard - Secure FinTech App{% endblock %}

{% block content %}
<h1 style="color: #667eea; margin-bottom: 30px;">Dashboard</h1>
<p style="font-size: 18px; margin-bottom: 20px;">Welcome, {{ username }}!</p>

<div class="card">
    <h3>Account Balance</h3>
    <p style="font-size: 24px; font-weight: bold; color: #667eea;">${{ "%.2f"|format(balance) }}</p>
</div>

<div class="card">
    <h3>Add Transaction</h3>
    <form method="POST" action="{{ url_for('add_transaction') }}">
        <div class="form-group">
            <label for="amount">Amount:</label>
            <input type="number" id="amount" name="amount" step="0.01" required>
        </div>
        <div class="form-group">
            <label for="description">Description (optional):</label>
            <textarea id="description" name="description" rows="3" maxlength="500"></textarea>
            <small style="color: #666;">Max 500 characters</small>
        </div>
        <div class="form-group">
            <button type="submit" class="btn">Add Transaction</button>
        </div>
    </form>
</div>

<div class="card">
    <h3>Recent Transactions</h3>
    {% if transactions %}
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Amount</th>
                <th>Description</th>
                <th>Date</th>
            </tr>
        </thead>
        <tbody>
            {% for transaction in transactions %}
            <tr>
                <td>{{ transaction[0] }}</td>
                <td>${{ "%.2f"|format(transaction[1]) }}</td>
                <td>{{ transaction[2] or '-' }}</td>
                <td>{{ transaction[3] }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>No transactions yet.</p>
    {% endif %}
</div>
{% endblock %}

